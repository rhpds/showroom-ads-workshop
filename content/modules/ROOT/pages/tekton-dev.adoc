= OpenShift Pipelines - Development
:source-highlighter: rouge
:toc: macro
:toclevels: 2

toc::[]

== Learning Objectives

By the end of this section, you will:

* Access Red Hat Developer Hub and understand its value proposition
* Create a new secure Quarkus application using OpenShift Pipelines templates
* Experience self-service development that eliminates weeks of setup time
* Understand how security is built into the development process from day one

== Your Development Challenge

As ACME's newest developer, you're facing the same frustration that developers everywhere experience when trying to create modern Kubernetes-native applications:

=== Your Current Reality: Weeks of Waiting

Here's what you've been dealing with in your traditional development environment:

* 3-5 business days submitting tickets and waiting for the platform team to set up your Kubernetes resources
* 1-2 weeks of back-and-forth emails trying to get OpenShift Pipelines configured
* Multiple handoff meetings between you, the platform team, and security - each one adding delays
* Complex security integration that you don't fully understand but somehow need to implement
* Manual setup of GitOps repositories and deployment manifests that feels like starting from scratch every time

=== What This Really Costs You

* You spend more time in meetings than writing code
* Platform teams are overwhelmed and can't respond quickly to your requests
* Security integration feels like black magic that only senior developers understand
* Every new project feels like reinventing the wheel

=== Your New Reality with RHADS: Self-Service in Minutes

But you're about to discover a completely different way of working:

* Zero waiting time: You'll create GitLab repos and OpenShift Pipelines instantly - no tickets, no waiting
* Zero configuration complexity: Kubernetes resources get generated automatically - you focus on your application code
* Zero security gaps: Container scanning and signing happen automatically - security becomes invisible to you
* Zero platform team dependency: You become self-sufficient and productive immediately

=== What This Means for Your Daily Work

* OpenShift Pipelines project setup: 3-4 weeks ‚Üí 5 minutes
* Pipeline configuration: Manual meetings ‚Üí Self-service automation
* Security compliance: 100% consistent without you needing to become a security expert
* Your productivity: Immediate access to everything you need

IMPORTANT: Today you'll experience this transformation firsthand by creating a production-ready application with OpenShift Pipelines in minutes, not weeks* You'll be amazed at how empowering this feels!

== Activity 1: Your First Steps into Your OpenShift Pipelines Journey

Let's embark on your journey by logging into your new development environment* You're about to discover how different OpenShift Pipelines makes your development experience!

=== Step 1: Open Red Hat Developer Hub

* Excited to explore your new tools, you navigate to the Red Hat Developer Hub using the URL from your welcome email:
+
link:{rhdh_url}[*Red Hat Developer Hub*^]

* You see the "Select a sign-in method" screen and click the *OIDC* option to start your journey

image::tekton-dev-1.png[]

TIP: Your organization uses OIDC authentication powered by Red Hat build of Keycloak - this secure authentication integration will save you time throughout your development workflow.

=== Step 2: Enter Your Credentials

* You're presented with the Red Hat Trusted Artifact Signer login form with username and password fields

* You enter your lab credentials that were provided to you:
+
[source,bash,subs="attributes"]
----
Username: {rhdh_user}
Password: {rhdh_user_password}
----

* Click the blue *Sign In* button to proceed

IMPORTANT: If you encounter any authentication issues, you can always reference the "Lab Access Information" page for your credentials.

=== What You Just Discovered

You've just accessed something revolutionary - your organization's **Internal Developer Portal (IDP)** that's been optimized for developers like you* As you look around, you realize this platform provides everything you've been wishing for:

* Self-service application templates that eliminate waiting for platform teams
* Integrated Kubernetes and OpenShift resources that "just work"
* Automated pipeline creation that handles the complex stuff for you
* A streamlined onboarding experience that gets you productive immediately

"This is going to change everything," you think to yourself as you explore the interface.

== Activity 2: Creating Your First OpenShift Pipelines Application

Now comes the exciting part - you're about to experience the magic of self-service application creation with OpenShift Pipelines that will transform how you work!

=== Step 1: Discovering Software Templates

* Eager to get started on your Black Friday project, you spot the **+ Self-service** button in the top-right corner of the Developer Hub
* You click **+ Self-service** and are amazed to see a catalog of ready-to-use templates - no more starting from scratch!

image::tekton-dev-2.png[]

=== Step 2: Choosing Your OpenShift Pipelines Template

* As you browse through the available templates, one catches your eye:
+
`*Securing a Quarkus Service Software Supply Chain (Tekton)*`

* "Perfect!" you think, "This is exactly what I need for a modern application with OpenShift Pipelines"
* You click *Choose* to select this template, excited to see what happens next

image::tekton-dev-3.png[]

TIP: You're about to witness something amazing - this single template will automatically create your complete OpenShift Pipelines environment with Tekton workflows, Kubernetes resources, and security scanning* No tickets, no waiting, no manual configuration!

=== Step 3: Configure Your OpenShift Pipelines Application

The template form will guide you through OpenShift Pipelines configuration with three main sections:

==== Application Information

Ensure that the following values are set for your template calues:

[cols="1,2", options="header"]
|===
| Field | Default Value
| Name | `qrks-tkn-{user}`
| Group ID | `redhat.rhdh`
| Artifact ID | `qrks-tkn-{user}`
| Java Package Name | `org.redhat.rhdh`
| Description | `A cool OpenShift Pipelines Quarkus app`
|===

Click *Next* to continue.

==== Image Registry Information

These settings determine where your OpenShift Pipelines container images will be stored:

[cols="1,2", options="header"]
|===
| Field | Default Value
| Image Registry | `Quay`
| Organization | `tssc`
|===

Click *Next* to continue.

==== Repository Information

This configures your OpenShift Pipelines source code repository and Tekton integration:

[cols="1,2", options="header"]
|===
| Field | Default Value
| Source Repo | `GitLab`
| Repo Owner | `development`
| Verify Commits | `enabled`
|===

Note that **Verify Commits** is enabled - this ensures all code commits are cryptographically signed for OpenShift Pipelines security.

Click *Review* to see a summary of your OpenShift Pipelines configuration.

=== Step 4: Create Your OpenShift Pipelines Application

* Review all the settings in the summary page

image::tekton-dev-4.png[]

image::tekton-dev-5.png[]

* Click *Create* to generate your OpenShift Pipelines application

The OpenShift Pipelines software template will now:

* Create GitLab repositories for your source code and GitOps manifests
* Set up Tekton pipelines with automated security scanning
* Configure Kubernetes resources for your application
* Set up container image signing and verification
* Deploy the OpenShift Pipelines application infrastructure to OpenShift

TIP: This entire OpenShift Pipelines setup that traditionally takes weeks is completed in under a minute!

=== Step 5: Access Your New OpenShift Pipelines Component

* Once the template execution completes, click *Open Component in Catalog*

* In Red Hat Developer Hub, go to the *Catalog* and locate your new component (`qrks-tkn-{user}`)

image::tekton-dev-6.png[]

* Click the component name to open its *Overview* page

image::tekton-dev-7.png[]

* You'll see your new OpenShift Pipelines application component with links to:
  * Source code repository with Kubernetes manifests
  * Tekton CI/CD pipelines
  * Application overview and health status
  * OpenShift Dev Spaces development environment

== Activity 3: Understanding the Generated Repository Structure

=== Step 1: Exploring the Developer Hub Configuration

The template you just used is part of a sophisticated system with three key repositories:

**üèóÔ∏è Developer Hub Configuration Repository:**

- **Location**: `{gitlab_url}/rhdh/tssc-developer-hub-configuration[^]`
- **Purpose**: Contains the OpenShift Pipelines template you just used
- **Template**: `scaffolder-templates/quarkus-stssc-template/`
- **What it does**: Defines the self-service template that generated your application

**‚öôÔ∏è Your Generated Application Repository:**

- **Location**: `{gitlab_url}/development/qrks-tkn-{user}[^]`
- **Purpose**: Contains your application source code with embedded OpenShift Pipelines
- **Pipeline files**: `.tekton/` directory with three key pipeline definitions:
  - `on-push.yaml` - Executes when you commit code
  - `on-tag.yaml` - Executes when you create a Git tag (promotes to staging)
  - `on-release.yaml` - Executes when you create a release (promotes to production)

=== Understanding Pipeline as Code

**What is Pipeline as Code?**

Pipeline as Code means your CI/CD pipeline definitions live alongside your application code in the same Git repository* This is revolutionary because:

- **Version Control**: Pipeline changes are tracked with your code changes
- **Reproducibility**: Anyone can see exactly how your application is built and deployed
- **Consistency**: The same pipeline runs regardless of environment
- **Developer Ownership**: Developers control their own pipeline without platform team dependencies

**The Three Pipeline YAML Files Explained:**

**üîÑ `on-push.yaml` - Development Pipeline**
```yaml
# Triggered by: git push
# Purpose: Validates code changes, runs tests, builds container
# Deploys to: Development environment
# Security: Vulnerability scanning, policy checks
```

**üè∑Ô∏è `on-tag.yaml` - Staging Pipeline**
```yaml
# Triggered by: git tag v1.0 && git push --tags
# Purpose: Promotes tested code to staging for validation
# Deploys to: Staging environment
# Security: Enhanced security scans, compliance validation
```

**üöÄ `on-release.yaml` - Production Pipeline**
```yaml
# Triggered by: Creating a GitLab release
# Purpose: Deploys validated code to production
# Deploys to: Production environment
# Security: Final security gates, audit trail creation
```

**Why This Matters for You:**

- **No More Tickets**: Change your pipeline by editing YAML, not filing platform tickets
- **Full Transparency**: See exactly what happens when you deploy
- **Environment Consistency**: Same pipeline logic across dev, staging, production
- **Audit Trail**: Every pipeline change is tracked in Git history

**üîß Pipeline Definitions Repository:**

- **Location**: `{gitlab_url}/rhdh/tssc-sample-pipelines[^]`
- **Purpose**: Contains reusable Tekton pipeline and task definitions
- **Components**:
  - `pipelines/` - Complete workflow definitions
  - `tasks/` - Individual pipeline step definitions
- **What it provides**: The building blocks your application pipelines reference

**üì¶ GitOps Repository:**

- **Location**: `{gitlab_url}/development/qrks-tkn-{user}-gitops[^]`
- **Purpose**: Contains Kubernetes manifests for deployment
- **What it does**: OpenShift GitOps (ArgoCD) monitors this repo and automatically deploys changes

== Activity 4: Examining Your Pipeline as Code Files

=== Step 1: Viewing Your Pipeline Definitions

Now that you understand the concept, let's look at the actual pipeline files that were generated for you:

* In OpenShift Dev Spaces (or back in your component overview), navigate to your repository
* Open the `.tekton/` directory to see your pipeline definitions
* You'll find three files that control your entire CI/CD workflow:

**üìÑ `.tekton/on-push.yaml`**

This file defines what happens when you push code:

* Clones your repository
* Runs unit tests
* Builds your Quarkus application
* Creates a container image
* Scans for vulnerabilities
* Signs the image cryptographically
* Deploys to development environment

**üìÑ `.tekton/on-tag.yaml`**

This file defines staging promotion:

* Takes the signed image from development
* Runs additional integration tests
* Performs enhanced security scanning
* Updates staging deployment manifests
* Triggers GitOps deployment to staging

**üìÑ `.tekton/on-release.yaml`**

This file defines production deployment:

* Validates staging deployment success
* Runs final security and compliance checks
* Updates production deployment manifests
* Creates audit trail for compliance
* Triggers GitOps deployment to production

TIP: These YAML files use references to the shared pipeline definitions in `{gitlab_url}/rhdh/tssc-sample-pipelines[^]`, promoting reusability and consistency across your organization.

== Activity 5: Exploring Your New OpenShift Pipelines Development Environment

=== Step 1: Accessing Your Browser-Based IDE

* Back in your component overview, you notice a link for *OpenShift Dev Spaces* and click it curiously
* "A browser-based development environment?" you wonder, "This should be interesting..."

* If you're redirected to an authentication page, you click *Log in with OpenShift*

image::tekton-dev-8.png[]

* On the *Authorize Access* screen, you click *Allow selected permissions*

image::tekton-dev-9.png[]

* On the repository trust prompt, you click the checkbox and then click *Continue*

image::tekton-dev-10.png[]

* When prompted to authenticate with GitLab, you enter your credentials:
+
[source,bash,subs="attributes"]
----
Username: {gitlab_user}
Password: {gitlab_user_password}
----

image::tekton-dev-11.png[]

* Click *Authorize devspaces* on the next window

image::tekton-dev-12.png[]

* Wait for the workspace to start and fully load VS Code
* If prompted, trust all workspaces and authors

image::tekton-dev-13.png[]

* You sign in with the same credentials you've been using:
+
[source,bash,subs="attributes"]
----
Username: {rhdh_user}
Password: {rhdh_user_password}
----

* When prompted, you click *Allow selected permissions* to grant access to your development workspace

=== Step 2: Explore the OpenShift Pipelines Development Environment

Once your workspace loads, you'll see:

- **Pre-configured Quarkus project** with OpenShift Pipelines best practices
- **Kubernetes manifests** in the `/deploy` directory
- **Tekton pipeline definitions** showing your OpenShift Pipelines workflow
- **Container configuration** with security scanning integration

=== Step 3: Making Your First Code Change

Time to make your mark on the Black Friday project! Let's trigger your first automated pipeline:

* You expand the `docs` folder in the file explorer, feeling confident about diving into the code
* You open the `index.md` file and decide to document your modern setup
* You add this line at the end of the document, proud of what you're building:
+
[source,markdown]
----
This application uses OpenShift Pipelines (Tekton) for secure CI/CD.
----

* You save the file (Ctrl+S or Cmd+S), ready to see the magic happen

=== Step 4: Your First Signed Commit

* You open a terminal in Dev Spaces (*Terminal ‚Üí New Terminal*) - no need to install anything locally!
* You stage your changes, feeling the anticipation build:
+
[source,bash]
----
git add .
----

* You commit your changes with confidence:
+
[source,bash]
----
git commit -m "Add OpenShift Pipelines documentation"
----

* Something interesting happens - you're prompted for signed commit authentication* You follow the browser flow to cryptographically sign your commit

* After completing the signing process, you feel a sense of accomplishment - your commit is now cryptographically signed for security

* You push your changes and watch the magic happen:
+
[source,bash]
----
git push
----

TIP: You just witnessed something powerful - your commit was automatically signed for security, and now it's triggering a complete OpenShift Pipelines workflow* No manual work, no tickets, no waiting!

image::tekton-dev-17.png[]

== What You Just Accomplished

Congratulations! You've just experienced the power of OpenShift Pipelines development with RHADS:

=== Time Savings
- **Traditional OpenShift Pipelines setup**: 3-4 weeks of Kubernetes and Tekton configuration
- **RHADS OpenShift Pipelines approach**: Less than 5 minutes of self-service

=== OpenShift Pipelines Security by Default
Your application includes:
* Automated container vulnerability scanning
* Image signing and verification with OpenShift Pipelines
* Tekton pipeline security enforcement
* Kubernetes-native security policies

=== Zero Platform Overhead
Everything was created automatically:
* GitLab repositories with Kubernetes manifests
* Tekton pipelines deployed and configured
* Security tools integrated with OpenShift Pipelines workflows
* OpenShift resources provisioned

== Understanding OpenShift Pipelines Benefits

=== Developer Experience
- **Browser-based development** - No local Kubernetes setup required
- **Live reload capabilities** - See changes instantly
- **Integrated debugging** - OpenShift Pipelines application troubleshooting
- **Collaborative workspaces** - Team development in the cloud

=== Operational Advantages
- **Kubernetes-native scaling** - Applications scale with platform capabilities
- **GitOps automation** - Declarative, auditable deployments
- **Resource efficiency** - Optimal resource utilization
- **Multi-cloud portability** - Run anywhere Kubernetes runs

=== Security Enhancements
- **Container-first security** - Security scanning at every layer
- **Immutable infrastructure** - Consistent, secure deployments
- **Policy enforcement** - Platform-level security controls
- **Complete audit trails** - Full supply chain visibility

== Next Steps

In the next section, **Staging - Promoting to stage environment**, you'll:

* See your Tekton pipeline execute with OpenShift Pipelines automation
* Understand how security validation works in OpenShift Pipelines
* Experience GitOps deployment to staging environments
* Learn about OpenShift Pipelines monitoring and observability

Your OpenShift Pipelines foundation is now in place - let's see your Tekton pipeline in action!